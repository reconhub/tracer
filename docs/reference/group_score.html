<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute the tracing score of a group of contacts — group_score • tracer</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">tracer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute the tracing score of a group of contacts</h1>
    </div>

    
    <p>This function compute the tracing score of a group of contacts, i.e. a set of
individual who have been exposed to one or several cases whose dates of
onsets are known. The tracing score is defined as the expected number of
individuals that will show symptoms for the first time on day &#39;t&#39;.</p>
    

    <pre><span class='fu'>group_score</span>(<span class='no'>x</span>, <span class='no'>R</span>, <span class='no'>lambda</span>, <span class='no'>w</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd>A list of integer vectors indicating dates of onset of the cases
causing exposure. Each item of the list corresponds to a different
individual.</dd>
      <dt>R</dt>
      <dd>The average effective reproduction number, i.e. the average number
of secondar cases seeded by an infected individual.</dd>
      <dt>lambda</dt>
      <dd>The average number of contacts (infectious or not) reported by
cases.</dd>
      <dt>w</dt>
      <dd>The probability mass function of the serial interval, i.e. the delay
from primary to secondary symptom onset. We recommend using the
<code>distcrete</code> package to generate discretized distributions (see
details).</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A function with two arguments:
<ul>
<li> <code>t</code>: the date for which the score should be computed.</p>
    <p></li>
<li> <code>visit_days_ago</code>: the number of days since the last visit to the
contact, defaulting to <code>1</code>, which means that the last visit happened the
day before <code>t</code>.</p>
    <p></li>
</ul></p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>See the <code>distcrete</code> package for generating discretized
    distributions at: <a href = 'http://github.com/reconhub/distcrete'>http://github.com/reconhub/distcrete</a>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fu'>require</span>(<span class='no'>distcrete</span>)) {
<span class='co'>## simulate data</span>
<span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='fl'>30</span>, <span class='fu'>sample</span>(<span class='fl'>0</span>:<span class='fl'>30</span>, <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fl'>5</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='fu'>head</span>(<span class='no'>x</span>)

 <span class='co'>## generate serial interval distribution</span>
 <span class='no'>SI</span> <span class='kw'>&lt;-</span> <span class='fu'>distcrete</span>(<span class='st'>"gamma"</span>, <span class='fl'>1L</span>, <span class='kw'>w</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>0.65</span>)$<span class='no'>d</span>
 <span class='fu'>plot</span>(<span class='no'>SI</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"h"</span>, <span class='kw'>xlim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>50</span>), <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"Days"</span>)
 <span class='fu'>title</span>(<span class='st'>"Serial interval distribution"</span>)

<span class='co'>## get scoring function</span>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='fu'>group_score</span>(<span class='no'>x</span>, <span class='no'>R</span>, <span class='no'>lambda</span>, <span class='no'>SI</span>$<span class='no'>d</span>)
<span class='fu'>g</span>(<span class='fu'>c</span>(<span class='fl'>10</span>,<span class='fl'>20</span>,<span class='fl'>30</span>)) <span class='co'># Exp nb of new cases at t=10,20,30</span>

<span class='fu'>plot</span>(<span class='no'>g</span>, <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>100</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"h"</span>,
    <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Expected number of new cases"</span>,
    <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"Current time"</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"Number of cases"</span>)

<span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='co'>## early wave</span>
<span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='fl'>30</span>, <span class='fu'>sample</span>(<span class='fl'>0</span>:<span class='fl'>20</span>, <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fl'>6</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))

<span class='co'>## large middle wave</span>
<span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='fl'>140</span>, <span class='fu'>sample</span>(<span class='fl'>15</span>:<span class='fl'>70</span>, <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fl'>3</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))

<span class='co'>## late wave</span>
<span class='no'>x3</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='fl'>140</span>, <span class='fu'>sample</span>(<span class='fl'>65</span>:<span class='fl'>80</span>, <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fl'>4</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))

<span class='co'>## get scoring functions for every group</span>
<span class='no'>list_g</span> <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='fu'>list</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='no'>x3</span>), <span class='no'>group_score</span>, <span class='no'>R</span>, <span class='no'>lambda</span>, <span class='no'>SI</span>$<span class='no'>d</span>)

<span class='co'>## get predictions for days 1:120</span>
<span class='no'>pred_nb_cases</span> <span class='kw'>&lt;-</span> <span class='fu'>sapply</span>(<span class='no'>list_g</span>, <span class='kw'>function</span>(<span class='no'>g</span>) <span class='fu'>g</span>(<span class='fl'>1</span>:<span class='fl'>120</span>))

<span class='fu'>barplot</span>(<span class='fu'>t</span>(<span class='no'>pred_nb_cases</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='pal1.html'>pal1</a></span>(<span class='fl'>3</span>), <span class='kw'>border</span> <span class='kw'>=</span> <span class='st'>"grey"</span>,
        <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Predicted new cases per groups"</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"Current time"</span>,
        <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"Number of new cases (stacked)"</span>)
<span class='fu'>axis</span>(<span class='kw'>side</span><span class='kw'>=</span><span class='fl'>1</span>)

}</div><div class='output co'>#&gt; <span class='error'>Error in group_score(x, R, lambda, SI$d): object &#39;R&#39; not found</span></div><img src='group_score-3.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Thibaut Jombart (<a href='mailto:thibautjombart@gmail.com'>thibautjombart@gmail.com</a>)

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thibaut Jombart, Dirk Schumacher.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
